<!DOCTYPE html>
<html>
    <head>
        <title>BLE</title>
    </head>
    <body>
    <button id="btn">Click me!</button>
        <script type="text/javascript">
            document.getElementById('btn').addEventListener('click', function(){
                let filters = [];
                filters.push( { name: "iPhone-Lauri" } );
                console.log('Requesting Bluetooth Device...');
                navigator.bluetooth.requestDevice({filters: filters})
                .then(device => {
                    console.log('> Name:             ' + device.name);
                    console.log('> Id:               ' + device.id);
                    console.log('> Connected:        ' + device.gatt.connected);
                    return device.gatt.connect();
                })
                .then(server => {
                  console.log(server.getPrimaryService('battery_service'));
                  // Getting Battery Service...
                  //return server.getPrimaryService('battery_service');
                })
                .catch(error => {
                    console.log('Argh! ' + error);
                });
            });
        </script>
    </body>
</html>
